{% extends "basic.html" %}

{% block head %}
<link rel="stylesheet" href="{{url_for('static', path='css/matrix.css')}}">
<link rel="stylesheet" href="{{url_for('static', path='css/content_blocks.css')}}">

<script src="{{url_for('static', path='js/linal/lab3.js')}}"></script>
{% endblock %}

{% block main_content %}
<div class="lab_step_block">
    <div class="lab_step_content">
        <div class="text_block">
            <h2>Задача 3</h2>
            <p>Даны матрица <i>А</i> и многочлен <i>p(x)</i>. Найти <i>p(A)</i>.</p>
        </div>
    </div>
    <div class="lab_step_content">
        <div class="matrix_with_name">
            <span class="matrix_name">A = </span>
            <div class="matrix non_editable_matrix">
                {% for row in variant['matrix_a'] %}
                <div class="matrix_row">
                    {% for element in row %}
                        <input type="number" class="matrix_element" value={{element}} />
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="text_block" id="lab1_C_condition">
            <p>
                p(x) =
                {{variant['coefficients'][0]}}x<sup>2</sup>
                {% if variant['coefficients'][1] >= 0 %} + {{variant['coefficients'][1]}} {% else %} - {{ -variant['coefficients'][1] }} {% endif %}x
                {% if variant['coefficients'][2] >= 0 %} + {{variant['coefficients'][2]}} {% else %} - {{ -variant['coefficients'][2] }} {% endif %}
            </p>
        </div>
    </div>
</div>


<div class="lab_step_block">
    <div class="lab_step_content">
        <div class="text_block">
            <h2>Шаг 1</h2>
        </div>
    </div>
    <div class="lab_step_content">
        <div class="matrix_with_name">
            <span class="matrix_name">{{variant['coefficients'][0]}} * A<sup>2</sup> = </span>
            <div class="matrix editable_matrix" id="step_1_matrix_1">
                {% for row in range(2) %}
                <div class="matrix_row">
                    {% for element in range(2) %}
                        <input type="number" class="matrix_element"/>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="matrix_with_name">
            <span class="matrix_name">{{variant['coefficients'][1]}} * A = </span>
            <div class="matrix editable_matrix" id="step_1_matrix_2">
                {% for row in range(2) %}
                <div class="matrix_row">
                    {% for element in range(2) %}
                        <input type="number" class="matrix_element"/>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="matrix_with_name">
            <span class="matrix_name">{{variant['coefficients'][2]}} * E = </span>
            <div class="matrix editable_matrix" id="step_1_matrix_3">
                {% for row in range(2) %}
                <div class="matrix_row">
                    {% for element in range(2) %}
                        <input type="number" class="matrix_element"/>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>


<div class="lab_step_block">
    <div class="lab_step_content">
        <div class="text_block">
            <h2>Шаг 2</h2>
        </div>
    </div>
    <div class="lab_step_content">
        <div class="matrix_with_name">
            <span class="matrix_name">p(A) = </span>
            <div class="matrix editable_matrix" id="step_2_matrix_1">
                {% for row in range(2) %}
                <div class="matrix_row">
                    {% for element in range(2) %}
                        <input type="number" class="matrix_element"/>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>


<div class="check_block">
    <button type="button" class="check_button" onclick="check_request()">Проверить</button>
    <div class="verdict_block" id="user_verdict_block" hidden="hidden">
        <img class="verdict_image">
        <p class="verdict_text"></p>
    </div>
</div>
{% endblock %}

{% block end_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof show_verdict === 'function') {
            show_verdict({{ is_solved | lower }});
        } else {
            console.error("Function show_verdict is not defined");
        }
    });
</script>
{% endblock %}
